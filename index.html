<!DOCTYPE html>
<!--
/*
This  program is free software;
you can redistribute it and/or modify it under the terms of the
GNU General Public License as published by the Free Software Foundation;
either version 3 of the License, or any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
*/
-->
<html>
	<head>
		<meta charset='UTF-8' />
		<meta name='viewport' content='width=device-width, initial-scale=1.0' />
		<title>wwwouaiebe - base64</title>
	</head>
	<body>
	<h1>Encoding et decoding to base64</h1>
		<h2>Text to base64 or base64 to text</h2>
		<h3>Text</h3>
		<p>
			<textarea cols='128' rows='6' name='DecodeTextArea' id='DecodeTextArea' placeholder='Text' spellcheck='false' ></textarea>
		</p>
		<p><button id='TextToBase64AndClipboard'>To base64 and to clipboard</button><button id='TextToBase64'>To base64 only</button></p>
		<h3>Base64</h3>
		<p>
			<textarea cols='128' rows='6' name='EncodeTextArea' id='EncodeTextArea' placeholder='base64' spellcheck='false' ></textarea>
		</p>
		<p><button id='Base64ToTextAndClipboard'>To text and to clipboard</button><button id='Base64ToText'>To text only</button></p>
		<h2>Image to base64</h2>
		<p>Select an image:</p>
		<div><input type='file' accept='image/*' id='ImageInput' /></div>
		<p>
			<textarea cols='128' rows='10' name='ImageEncode' id='ImageEncode' placeholder='Image to base64' spellcheck='false' ></textarea>
		</p>
		<p><button id='ImageBase64ToClipBoard' >Image Base64 to clipboard</button></p>
		<p>
			<img id='Image' src='' />
		</p>
		<h2>Base64 to image</h2>
		<p>
			<textarea cols='128' rows='10' name='ImageDecodeTextArea' id='ImageDecodeTextArea' placeholder='Base64 to image' spellcheck='false' ></textarea>
		</p>
		<p><button id='Base64ToImage'>To image</button><button id='SaveImage' >Save file...</button></p>
		<p>
			<img id='DecodedImage' src='' />
		</p>
		<script>
			function textToBase64 ( ) {
				document.getElementById('EncodeTextArea').value = btoa ( unescape(encodeURIComponent( document.getElementById ( 'DecodeTextArea' ).value ) ) );
			};
			document.getElementById ( 'TextToBase64AndClipboard' ).addEventListener ( 
				'click',
				() => {
					textToBase64 ( );
					let textArea = document.getElementById('EncodeTextArea');
					textArea.focus ( );
					textArea.select ( );
					document.execCommand ( 'copy' );
				}
			); 
			document.getElementById ( 'TextToBase64' ).addEventListener ( 'click', textToBase64 );
			function base64ToText ( ) {
				document.getElementById ( 'DecodeTextArea' ).value = decodeURIComponent ( escape( atob ( document.getElementById ( 'EncodeTextArea' ).value ) ) );
			}
			document.getElementById ( 'Base64ToTextAndClipboard' ).addEventListener (
				'click',
				( ) => {
					base64ToText ( );
					let textArea = document.getElementById ( 'DecodeTextArea' );
					textArea.focus ( );
					textArea.select ( );
					document.execCommand ( 'copy' );
				}
			);
			document.getElementById ( 'Base64ToText' ).addEventListener ( 'click', base64ToText );
			function base64ToImage ( event ) {
				document.getElementById ( 'DecodedImage' ).src = document.getElementById ( 'ImageDecodeTextArea' ).value; 
			};
			document.getElementById ( 'Base64ToImage' ).addEventListener ( 'click', base64ToImage );
			function saveImage ( event ) {
				var element = document.createElement ( 'a' );
				element.setAttribute( 'href', document.getElementById ( 'ImageDecodeTextArea' ).value );
				element.setAttribute( 'download', 'img' );
				element.style.display = 'none';
				element.click ( );
			};
			document.getElementById ( 'SaveImage' ).addEventListener ( 'click', saveImage );
			function encodeImage ( event ) {
				var fileReader = new FileReader( );
				fileReader.onloadend  = function ( event ) {
					var textArea = document.getElementById('ImageEncode');
					textArea.value = fileReader.result;
					document.getElementById ( 'Image' ).src = fileReader.result;
					textArea.focus ( );
					textArea.select ( );
					document.execCommand ( 'copy' );
				};
				fileReader.readAsDataURL ( event.target.files [ 0 ] );
			};
			document.getElementById ( 'ImageInput' ).addEventListener ( 'change' , encodeImage);
			function imageBase64ToClipBoard ( ) {
				var textArea = document.getElementById('ImageEncode');
				textArea.focus ( );
				textArea.select ( );
				document.execCommand ( 'copy' );
			};
			document.getElementById ( 'ImageBase64ToClipBoard' ).addEventListener ( 'click',  imageBase64ToClipBoard ); 
		</script>
	</body>
</html>